# 语音识别功能使用指南

## 🎤 功能概述

AI助手工具现在支持语音输入功能，您可以通过语音与AI进行对话，无需手动输入文字。系统支持多个语音识别服务提供商，包括：

- **Azure Speech Services** - 微软语音识别服务
- **Google Cloud Speech-to-Text** - 谷歌云语音转文字服务  
- **百度语音识别** - 百度智能云语音识别服务

## ⚙️ 配置设置

### 1. 打开设置界面
- 点击聊天窗口右上角的齿轮图标 ⚙️
- 或者通过系统托盘菜单选择"设置"

### 2. 语音识别配置
在设置界面中找到"语音识别配置"部分：

#### 基本设置
- **启用语音识别功能**: 勾选此选项以启用语音输入
- **服务提供商**: 选择要使用的语音识别服务
- **识别语言**: 选择语音识别的语言（支持中文、英文、日文、韩文）
- **采样率**: 音频采样率设置（推荐16000Hz）

#### Azure Speech Services 配置
如果选择Azure作为服务提供商，需要配置：
- **订阅密钥**: Azure认知服务的订阅密钥
- **区域**: 服务区域（如：eastasia、westus2等）
- **端点**: Azure语音服务端点URL

**获取Azure配置信息：**
1. 访问 [Azure Portal](https://portal.azure.com)
2. 创建"认知服务"或"语音服务"资源
3. 在资源页面获取密钥和端点信息

#### Google Cloud Speech-to-Text 配置
如果选择Google作为服务提供商，需要配置：
- **API密钥**: Google Cloud项目的API密钥
- **端点**: Google语音识别API端点

**获取Google配置信息：**
1. 访问 [Google Cloud Console](https://console.cloud.google.com)
2. 启用Speech-to-Text API
3. 创建API密钥或服务账户

#### 百度语音识别配置
如果选择百度作为服务提供商，需要配置：
- **应用ID**: 百度语音应用的App ID
- **API Key**: 百度语音应用的API Key
- **Secret Key**: 百度语音应用的Secret Key

**获取百度配置信息：**
1. 访问 [百度智能云](https://cloud.baidu.com)
2. 创建语音识别应用
3. 获取应用的App ID、API Key和Secret Key

### 3. 保存配置
配置完成后点击"保存设置"按钮保存配置。

## 🎯 使用方法

### 语音输入步骤

1. **开始录音**
   - 点击聊天输入框左侧的麦克风图标 🎤
   - 按钮会变成红色的"停止"按钮，表示正在录音
   - 状态栏显示"正在录音..."

2. **说话**
   - 对着麦克风清晰地说出您想要输入的内容
   - 尽量在安静的环境中使用以获得更好的识别效果

3. **停止录音**
   - 再次点击"停止"按钮结束录音
   - 系统会自动将音频发送到语音识别服务
   - 状态栏显示"正在识别语音..."

4. **查看结果**
   - 识别完成后，文字会自动填入输入框
   - 状态栏显示"语音识别完成"
   - 系统会自动发送识别的文字给AI助手

### 界面反馈

- **录音状态**: 录音时按钮会有脉冲动画效果
- **禁用控件**: 录音期间输入框和发送按钮会被禁用
- **状态提示**: 状态栏实时显示当前操作状态
- **错误提示**: 如果出现错误会显示相应的错误信息

## 🔧 故障排除

### 常见问题

#### 1. 麦克风权限问题
**现象**: 点击录音按钮后提示"无法访问麦克风"
**解决方案**: 
- 检查系统麦克风权限设置
- 确保麦克风设备正常工作
- 重启应用程序

#### 2. API配置错误
**现象**: 提示"请先在设置中配置语音识别服务"
**解决方案**:
- 检查是否已启用语音识别功能
- 确认API密钥等配置信息正确
- 验证网络连接正常

#### 3. 识别结果为空
**现象**: 录音完成但没有识别出文字
**解决方案**:
- 检查录音环境是否过于嘈杂
- 尝试说话更清晰一些
- 检查麦克风音量设置
- 尝试更换语音识别服务提供商

#### 4. 网络连接问题
**现象**: 提示"语音识别失败"或连接超时
**解决方案**:
- 检查网络连接
- 确认防火墙设置
- 验证API服务状态

### 调试信息

应用程序会在日志文件中记录详细的语音识别过程信息：
- 日志文件位置: `~/.aiquiztool/aiquiztool.log`
- 包含录音开始/结束时间
- API请求和响应信息
- 错误详情和堆栈跟踪

## 💡 使用技巧

### 获得更好识别效果的建议

1. **环境设置**
   - 选择安静的环境进行录音
   - 避免背景噪音干扰
   - 保持麦克风与嘴部适当距离

2. **说话技巧**
   - 语速适中，发音清晰
   - 避免方言或口音过重
   - 句子之间适当停顿

3. **技术设置**
   - 根据实际情况选择合适的采样率
   - 不同服务提供商的识别效果可能有差异
   - 可以尝试不同的语言设置

### 成本考虑

- **Azure**: 按使用量计费，有免费额度
- **Google**: 按月免费额度，超出部分按量计费
- **百度**: 提供免费调用次数，超出后按量计费

建议在测试阶段使用免费额度，正式使用时根据需求选择合适的服务商。

## 🔒 隐私和安全

### 数据处理
- 录音数据仅在识别过程中临时传输到选定的服务提供商
- 应用程序本身不会永久存储音频数据
- 识别完成后音频数据会被自动清理

### 安全建议
- 妥善保管API密钥等敏感信息
- 定期更新API密钥
- 避免在公共场所使用语音输入敏感信息

## 📞 技术支持

如果您在使用过程中遇到问题：

1. 查看应用程序日志文件获取详细错误信息
2. 检查网络连接和API配置
3. 尝试重启应用程序
4. 更换不同的语音识别服务提供商

---

*语音识别功能让您的AI助手使用体验更加便捷和自然。享受语音交互带来的全新体验！*


